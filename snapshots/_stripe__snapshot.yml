version: 2

snapshots:
  - name: payment_snapshot
    relation: source('stripe', 'payment')
    config:
      schema: snapshots
      database: analytics
      unique_key: id
      strategy: check
      check_cols: ['id', 'orderid', 'paymentmethod', 'status', 'amount', 'created']
      hard_deletes: ignore
      dbt_valid_to_current: "to_date('9999-12-31')"